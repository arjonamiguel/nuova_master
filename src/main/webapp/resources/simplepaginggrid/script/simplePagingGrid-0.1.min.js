(function(b){function a(e,d,c){return e.slice(d*c,d*c+c)}b.fn.simplePagingGrid=function(c){var d=b.extend({buttonBarTemplate:'<div><button class="btn">&laquo; Prev</button><button class="btn pull-right">Next &raquo</button></div><div class="clearfix"></div>',tableTemplate:"<table><thead></thead><tbody></tbody></table>",headerTemplate:'<th width="{{width}}">{{title}}</th>',sortableHeaderTemplate:'<th width="{{width}}"><ul class="sort"><li class="sort-ascending"/><li class="sort-descending"/></ul>{{title}}</th>'},c.templates);var e=b.extend({pageSize:10,columnWidths:[],cellTemplates:null,sortable:[],sortOrder:"asc",initialSortColumn:null,tableClass:"table"},c);e.templates=d;return this.each(function(){var v;var g;var u;var w;var r;var y;var n;var t=0;var j;var i;var o;var k;var q=false;var s=e.sortOrder;var p=e.initialSortColumn;var x=null;var l=b(this);function m(){if(q){i.attr("disabled","disabled");o.attr("disabled","disabled")}else{if(t===0){i.attr("disabled","disabled")}else{i.removeAttr("disabled")}if(k.length<e.pageSize){o.attr("disabled","disabled")}else{o.removeAttr("disabled")}}}function h(){var A;var z;var B;if(y!==null){A=p===null?y:y.sort(function(D,C){z=s==="asc"?D[p]:C[p];B=s==="asc"?C[p]:D[p];if(b.isNumeric(z)){if(z<B){return 1}else{if(z>B){return -1}}return 0}return z.localeCompare(B)});k=a(A,t,e.pageSize);f();m()}else{if(n!==null){q=true;m();b.getJSON(n,{page:t,pageSize:e.pageSize,sortColumn:p,sortOrder:s},function(C){k=C;f();q=false;m()})}}}function f(){g.empty();b.each(k,function(B,A){var z=b("<tr>");b.each(e.columnKeys,function(D,C){var E=b("<td>");if(e.cellTemplates!==null&&D<e.cellTemplates.length&&e.cellTemplates[D]!==null){E.html(Mustache.render(e.cellTemplates[D],A))}else{E.html(A[C])}z.append(E)});g.append(z)})}if(e.hasOwnProperty("data")){y=e.data;n=null}else{y=null;n=e.dataUrl}v=b(e.templates.tableTemplate);u=v.find("thead");w=b("<tr>").appendTo(u);g=v.find("tbody");b.each(e.columnNames,function(B,A){var G=e.sortable[B];var E;var z;var F=e.columnKeys[B];var D;D=e.columnWidths.length>B?e.columnWidths[B]:"";if(G){r=b(Mustache.render(e.templates.sortableHeaderTemplate,{width:D,title:A}));E=r.find(".sort-ascending");z=r.find(".sort-descending");function C(H){H.preventDefault();if(p===F){s=s==="asc"?"desc":"asc"}p=F;if(x!=null){x.removeClass("sort-ascending-active");x.removeClass("sort-descending-active")}x=s==="asc"?E:z;x.addClass(s==="asc"?"sort-ascending-active":"sort-descending-active");h()}E.click(function(H){C(H)});z.click(function(H){C(H)})}else{r=b(Mustache.render(e.templates.headerTemplate,{width:D,title:A}))}w.append(r)});v.addClass(e.tableClass);buttonBarHtml=e.templates.buttonBarTemplate;j=b(buttonBarHtml);i=j.find("button").first();o=j.find("button").last();i.click(function(z){z.preventDefault();if(t>0){t--;h()}});o.click(function(z){z.preventDefault();if(k.length===e.pageSize){t++;h()}});h();l.append(v);l.append(j);return this})}})(jQuery);